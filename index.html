<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>University Notes - Share & Access Study Materials</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Deployment Progress / Welcome Banner -->
  <div id="welcome-banner" class="welcome-banner">
    <div>
      <h2>ğŸ‰ Website Deployment in Progress! ğŸ‰</h2>
      <p>
        âœ… Date: <span id="deploy-date"></span><br />
        âœ… Status: <span id="deploy-status" class="blue-badge">Building</span><br />
        âœ… Commit: <span id="deploy-commit">Initial commit</span><br />
        ğŸ•’ Please wait a moment while your site is going live!
      </p>
      <button onclick="document.getElementById('welcome-banner').style.display='none'" class="primary-btn">Hide Message</button>
    </div>
  </div>

  <!-- Auth Modal -->
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <h2 id="auth-title">Login to University Notes</h2>
      <div class="auth-tabs">
        <button class="auth-tab active" onclick="switchAuthTab('login')">Login</button>
        <button class="auth-tab" onclick="switchAuthTab('signup')">Sign Up</button>
      </div>
      <div id="login-form" class="auth-form active">
        <input type="email" id="login-email" placeholder="Email" />
        <input type="password" id="login-password" placeholder="Password" />
        <button onclick="handleLogin()" class="primary-btn">Login</button>
      </div>
      <div id="signup-form" class="auth-form">
        <input type="email" id="signup-email" placeholder="Email" />
        <input type="password" id="signup-password" placeholder="Password (min 6 characters)" />
        <input type="password" id="signup-confirm" placeholder="Confirm Password" />
        <button onclick="handleSignup()" class="primary-btn">Create Account</button>
      </div>
      <p class="auth-note">Browse notes without login. Login required for uploads.</p>
    </div>
  </div>

  <!-- Header -->
  <header>
    <div class="container header-content">
      <div>
        <h1>ğŸ“š University Notes Platform</h1>
        <p>Share and access study materials easily</p>
      </div>
      <div id="user-menu">
        <button onclick="showAuthModal()" id="login-btn" class="header-btn">Login</button>
        <div id="user-info" style="display:none;">
          <span id="user-email"></span>
          <button onclick="handleLogout()" class="header-btn logout-btn">Logout</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <button class="nav-btn active" data-section="overview">ğŸ“Š Overview</button>
      <button class="nav-btn" data-section="browse">ğŸ“– Browse</button>
      <button class="nav-btn" data-section="search">ğŸ” Search</button>
      <button class="nav-btn" data-section="upload">â¬†ï¸ Upload</button>
      <button class="nav-btn" data-section="manage">âš™ï¸ Manage</button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <!-- Overview Section -->
    <section id="overview-section" class="content-section active">
      <h2>Dashboard Overview</h2>
      <div class="stats-container">
        <div class="stat-card">
          <h3>ğŸ“ Total Uploads</h3>
          <p class="stat-number" id="total-uploads">0</p>
        </div>
        <div class="stat-card">
          <h3>ğŸ“… This Month</h3>
          <p class="stat-number" id="month-uploads">0</p>
        </div>
        <div class="stat-card">
          <h3>ğŸ“† Today</h3>
          <p class="stat-number" id="today-uploads">0</p>
        </div>
      </div>
      <div class="recent-uploads">
        <h3>Recent Uploads</h3>
        <div id="recent-list"></div>
      </div>
    </section>

    <!-- Browse Section -->
    <section id="browse-section" class="content-section">
      <h2>Browse by Branch</h2>
      <div id="branches-list"></div>
    </section>

    <!-- Search Section -->
    <section id="search-section" class="content-section">
      <h2>Search Notes</h2>
      <div class="search-box">
        <input type="text" id="search-input" placeholder="Search by branch, semester, subject..." />
        <button onclick="performSearch()">ğŸ” Search</button>
      </div>
      <div class="filter-options">
        <select id="branch-filter"><option value="">All Branches</option></select>
        <select id="subject-filter"><option value="">All Subjects</option></select>
      </div>
      <div id="search-results"></div>
    </section>

    <!-- Upload Section -->
    <section id="upload-section" class="content-section">
      <h2>Upload Files</h2>
      <div id="upload-login-required" style="display:none;">
        <p>âš ï¸ Please <a href="#" onclick="showAuthModal()">login</a> to upload files.</p>
      </div>
      <div class="form-container" id="upload-form-container">
        <div class="form-group">
          <label>Select Section:</label>
          <select id="upload-section-select"><option value="">Choose section...</option></select>
        </div>
        <div class="form-group">
          <label>Select Subject:</label>
          <select id="upload-subject-select"><option value="">Choose subject...</option></select>
        </div>
        <div class="form-group">
          <label>File Title:</label>
          <input type="text" id="upload-title" placeholder="e.g., Chapter 1 Notes" />
        </div>
        <div class="form-group">
          <label>Description (optional):</label>
          <textarea id="upload-description" placeholder="Brief description..."></textarea>
        </div>
        <div class="form-group">
          <label>Select File:</label>
          <input type="file" id="file-input" accept="*/*" />
          <p class="file-info">Supports: PDF, Images, Videos, Documents, PPT (Max 50MB)</p>
        </div>
        <button onclick="uploadFile()" class="primary-btn">â¬†ï¸ Upload File</button>
      </div>
    </section>

    <!-- Manage Section (Admin) -->
    <section id="manage-section" class="content-section">
      <h2>Manage Structure</h2>
      <p class="admin-note">Admin code required: <code>sahil12345</code></p>
      <div class="form-container">
        <h3>Create Branch</h3>
        <input type="text" id="branch-name" placeholder="Branch name (e.g., CSE)" />
        <input type="text" id="branch-desc" placeholder="Description" />
        <button onclick="createBranch()">â• Create Branch</button>
      </div>

      <div class="form-container">
        <h3>Create Semester</h3>
        <select id="semester-branch-select"><option value="">Select Branch</option></select>
        <input type="text" id="semester-name" placeholder="Semester name (e.g., Semester 1)" />
        <input type="text" id="semester-desc" placeholder="Description" />
        <button onclick="createSemester()">â• Create Semester</button>
      </div>

      <div class="form-container">
        <h3>Create Section</h3>
        <select id="section-semester-select"><option value="">Select Semester</option></select>
        <input type="text" id="section-name" placeholder="Section name (e.g., Section A)" />
        <input type="text" id="section-desc" placeholder="Description" />
        <button onclick="createSection()">â• Create Section</button>
      </div>

      <div class="form-container">
        <h3>Create Subject</h3>
        <select id="subject-section-select"><option value="">Select Section</option></select>
        <input type="text" id="subject-name" placeholder="Subject name (e.g., Mathematics)" />
        <input type="text" id="subject-desc" placeholder="Description" />
        <button onclick="createSubject()">â• Create Subject</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 University Notes Platform | Made with â¤ï¸ for students</p>
  </footer>

  <script type="module" src="supabaseClient.js"></script>
  <script type="module" src="app.js"></script>

  <script>
    window.addEventListener('DOMContentLoaded', function () {
      document.getElementById('deploy-date').textContent = new Date().toLocaleDateString();
      document.getElementById('deploy-commit').textContent = 'Initial commit';
    });
  </script>
</body>
</html>
